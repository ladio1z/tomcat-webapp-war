
pipeline { 

	agent any

	tools{
		maven 'maven3'
	}

       
	stages{     	
		
                stage(' 1. - Trigging the CD Pipeline by the CI Pipeline'){		
	              steps{
		       		echo "Triggering Upstream CD Pipeline"	
				echo " Building an Artifact"
                                sh "mvn clean package"	  	                
			}
		}


		stage('2 - Deploying Artifact to Tomcat - A '){
                        steps{
                                echo "Deploy an artifact to Tomcat A"

                                deploy adapters: [tomcat9(credentialsId: 'Tomcat_Admin',
                                                 path: '', url: 'http://192.168.43.212:8082/')],
                                                 contextPath: null, onFailure: false, war: '**/*.war'
                         }
                  }

                
		stage('3 - Deploying Artifact to Tomcat - B '){
                        steps{
                                echo "Deploy an artifact to Tomcat B"

                                deploy adapters: [tomcat9(credentialsId: 'Tomcat_Admin',
                                                 path: '', url: 'http://192.168.33.27:8810/')],
                                                 contextPath: null, onFailure: false, war: 'target/*.war'
                         }
                  }

               

                stage('4. - CD Pipeline Done'){		
	             steps{
		           echo "Completion of CD Pipeline"	

                           }
		  }


	  }

}

